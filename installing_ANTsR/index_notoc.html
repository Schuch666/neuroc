<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title></title>







</head>

<body>







<p>All code for this document is located at <a href="https://raw.githubusercontent.com/muschellij2/neuroc/master/installing_ANTsR/index.R">here</a>.</p>
<style type="text/css">
div.tocify {
  max-height: 50%;
}
</style>
<p>In this tutorial, we will go through the steps of installing <code>ANTsR</code>, including those for <code>ITKR</code>.</p>
<p>There are 2 options for installing <code>ITKR</code> and <code>ANTsR</code>: one is using <code>devtools</code> and the other is installing the binaries. We recommend installing the binary file of <code>ITKR</code> and using <code>devtools</code> to install <code>ANTsR</code>.</p>
<div id="option-1-using-devtools" class="section level1">
<h1>Option 1: Using Devtools</h1>
<div id="install-devtools" class="section level2">
<h2>Install devtools</h2>
<p>You must have <code>devtools</code> installed to install from GitHub.</p>
<pre class="r"><code>packages = installed.packages()
packages = packages[, &quot;Package&quot;]
if (!&quot;devtools&quot; %in% packages) {
  install.packages(&quot;devtools&quot;)
}</code></pre>
<p>Please refer to <a href="neuroc-help-installing-devtools">installing devtools</a> for additional instructions or troubleshooting.</p>
</div>
<div id="mac-osx" class="section level2">
<h2>Mac OSX</h2>
<p>You need to install <a href="https://developer.apple.com/library/content/technotes/tn2339/_index.html">Command Line Tools</a>, aka the command line tools for Xcode, if you have not already. <a href="http://osxdaily.com/2014/02/12/install-command-line-tools-mac-os-x/" class="uri">http://osxdaily.com/2014/02/12/install-command-line-tools-mac-os-x/</a> is a great tutorial how.</p>
</div>
<div id="windows" class="section level2">
<h2>Windows</h2>
<p>Although still untested there is a good <a href="http://www.nemotos.net/?p=1481">tutorial on running FSL on Windows</a> as well as <a href="https://github.com/stnava/ANTsR/wiki/Installing-ANTsR-in-Windows-10-(along-with-FSL,-Rstudio,-Freesurfer,-etc)">ANTsR on Windows through Linux Subsystem</a>.</p>
</div>
<div id="cmake-and-git" class="section level2">
<h2><code>cmake</code> and <code>git</code></h2>
<p><a href="https://github.com/stnava/ANTsR"><code>ANTsR</code></a> depends on <a href="https://github.com/stnava/ITKR"><code>ITKR</code></a>, which states in the <a href="https://github.com/stnava/ITKR/blob/master/DESCRIPTION">DESCRIPTION file</a>:</p>
<pre><code>OS_type: unix
SystemRequirements: cmake, git, clang (recommended)</code></pre>
<p>so you must install <code>git</code> and <code>cmake</code>. Also, you <strong>must have a Unix-based</strong> system get these programs to work, so Windows users are out of luck. The continuing discussion will <strong>only</strong> support Linux variants and Mac OSX.</p>
</div>
<div id="setting-the-path" class="section level2">
<h2>Setting the PATH</h2>
<p>In either Linux or Mac OSX, there is a <code>PATH</code> <a href="https://en.wikipedia.org/wiki/Environment_variable">“environment variable”</a>. This tells your computer which folders to look in when you type in a command. For example, the <code>cd</code> command changes directories and the code (or compiled code) to do that is located in a folder. When you type <code>cd</code>, your computer looks (in order) in the folders specified in the <code>PATH</code> variable.</p>
<p>In a shell (discussed later), you can type</p>
<pre><code>which cd</code></pre>
<p>and find the executable that you are calling when you actually execute the <code>cd</code> command.</p>
</div>
<div id="testing-if-cmake-and-git-are-installed" class="section level2">
<h2>Testing if <code>cmake</code> and <code>git</code> are installed</h2>
<p>Below are some instructions testing whether <code>git</code> and <code>cmake</code> are installed. If they are not installed, then there are instructions to install them.</p>
<div id="mac-osx-1" class="section level3">
<h3>Mac OSX</h3>
<p>If you are on Mac OSX open up the <a href="http://www.macworld.co.uk/feature/mac-software/get-more-out-of-os-x-terminal-3608274/">Terminal</a> and type</p>
<pre><code>which cmake
which git</code></pre>
<p>and if no paths are returned, then you don’t have these installed.</p>
<div id="installing-git" class="section level4">
<h4>Installing Git</h4>
<p>Please go to <a href="https://www.atlassian.com/git/tutorials/install-git/mac-os-x" class="uri">https://www.atlassian.com/git/tutorials/install-git/mac-os-x</a> if you do not have <code>git</code> installed. It is a good and comprehensive tutorial on how to install <code>git</code> (but you may already have it installed).</p>
</div>
<div id="installing-cmake" class="section level4">
<h4>Installing CMake</h4>
<p>You can download <a href="https://cmake.org/download/">CMake</a> and you can download either the Binary (recommended) or the Source (more advanced, not covered here - see install instructions from CMake website).</p>
<p>After downloading the Binary, you will have the CMake application. If you use the dmg, you can drag and drop the application into the <code>/Applications</code> folder. If you use <code>bash</code> (I believe is the default), then open the Terminal, type <code>vi ~/.bash_profile</code>. This will open an editor (<code>vi</code>) and type the letter <code>i</code>, go to the bottom of the document, and copy and paste</p>
<pre><code>export PATH=$PATH:/Applications/CMake.app/Contents/bin</code></pre>
<p>to the bottom. To exit type <code>ESC+:+wq</code>. The <code>ESC</code> escapes anything you were doing (like inserting text), the colon is telling <code>vi</code> you’re in “Colon mode, the <code>w</code> means write the file, and <code>q</code> means quit. If you edited a file and don’t want to save changes, use <code>:q!</code> (quitting and not saving/writing).</p>
</div>
</div>
<div id="linux" class="section level3">
<h3>Linux</h3>
<p>You open up the <a href="http://www.howtogeek.com/howto/22283/four-ways-to-get-instant-access-to-a-terminal-in-linux/">Terminal</a> and type :</p>
<pre><code>which cmake
which git</code></pre>
<p>and if no paths are returned, then you don’t have these installed.</p>
<div id="installing-git-1" class="section level4">
<h4>Installing git</h4>
<p>Depending on the variant of Linux you are on, the following commands should work:</p>
<pre class="bash"><code>sudo apt-get install git # ubuntu/debian
sudo yum install git # centos/fedora</code></pre>
</div>
<div id="installing-cmake-1" class="section level4">
<h4>Installing cmake</h4>
<p><a href="http://askubuntu.com/questions/610291/how-to-install-cmake-3-2-on-ubuntu-14-04" class="uri">http://askubuntu.com/questions/610291/how-to-install-cmake-3-2-on-ubuntu-14-04</a> is a good discussion on how to install <code>cmake</code> on Ubuntu. <a href="https://help.directadmin.com/item.php?id=494" class="uri">https://help.directadmin.com/item.php?id=494</a> is a good discussion on how to install <code>cmake</code> on Centos (hint <code>sudo yum install cmake</code>).</p>
</div>
</div>
</div>
<div id="installing-itkr" class="section level2">
<h2>Installing ITKR</h2>
<p><strong>You must install <code>ITKR</code> and <code>ANTsR</code> from R from a Terminal NOT from a GUI (RStudio/R application).</strong></p>
<p>After <code>devtools</code> is installed, you can update <code>ITKR</code>:</p>
<pre class="r"><code>devtools::install_github( &quot;stnava/ITKR&quot; )</code></pre>
<p>This will take a lot of time to compile and such.</p>
</div>
<div id="installing-antsr" class="section level2">
<h2>Installing ANTsR</h2>
<p><strong>You must install <code>ITKR</code> and <code>ANTsR</code> from R from a Terminal NOT from a GUI (RStudio/R application).</strong></p>
<p>If <code>ITKR</code> did not install, stop. Stop here. <code>ANTsR</code> cannot work without <code>ITKR</code>. If you think <code>ITKR</code> has a configuration problem and <strong>NOT</strong> a problem with your setup, you should <a href="https://github.com/stnava/ITKR/issues">open an issue</a> and see if the authors would be able to fix it. Make sure you try the same steps on another machine (or virtual machine) before saying that something is “broken”.</p>
<p>Again, we can install <code>ANTsR</code> using `devtools:</p>
<pre class="r"><code>devtools::install_github( &quot;stnava/ANTsR&quot; )</code></pre>
<p>This also will take a lot of time to compile.</p>
</div>
<div id="updating-antsr" class="section level2">
<h2>Updating ANTsR</h2>
<p><code>ANTsR</code> takes a long time to compile and <code>ITKR</code> takes even longer. If you want to re-install or update <code>ANTsR</code> from GitHub, but not update any of the dependencies (including <code>ITKR</code>), then you should run:</p>
<pre class="r"><code>devtools::install_github(&quot;stnava/ANTsR&quot;, upgrade_dependencies = FALSE)</code></pre>
</div>
</div>
<div id="option-2-installing-binaries" class="section level1">
<h1>Option 2: Installing Binaries</h1>
<p>If you go to the <a href="https://github.com/stnava/ANTsR/releases">Release Page for ANTsR</a> they have pre-built binary releases for different systems. If not specified, a <code>.tgz</code> should be the binary for the Mac OSX version and the <code>.tar.gz</code> should be that for a PC/Linux. You should check to see when the last release was made as some of these may be largely outdated, may not have the latest bug fixes, and may not be versioned corresponding to some common rules.</p>
</div>
<div id="troubleshooting-errors" class="section level1">
<h1>Troubleshooting errors</h1>
<p>If you see the following error when installing ITKR:</p>
<pre><code>./configure: line 26: cmake: command not found</code></pre>
<p>guess what? <code>cmake</code> cannot be found. You either need to repeat the steps above or try to install ITKR using a Terminal (by calling <code>R</code>) instead of RStudio or the R application. This is due to some environment variables (not <code>PATH</code> though) not being available to those programs. Also, make sure you put <code>export</code> before <code>PATH</code>, and make sure <code>PATH</code> is not defined somewhere lower in the <code>~/.bash_profile</code> and overwrites your changes.</p>
<p>You can see all of <code>PATH</code> by typing in the Terminal:</p>
<pre><code>echo ${PATH}</code></pre>
<div id="rgl" class="section level2">
<h2>RGL</h2>
<p>One of the packages <code>ANTsR</code> suggests is <code>rgl</code>. For Mac OSX, this should be installed with the package if not already installed, which usually works OK. On some Linux variants like Ubuntu, the installation may fail.</p>
<p>If you have errors installing <code>rgl</code>, then according to <a href="http://stackoverflow.com/questions/31820865/error-in-installing-rgl-package">a StackOverflow post</a>, you can install using the following command:</p>
<pre><code>sudo apt-get install r-cran-rgl</code></pre>
</div>
</div>
<div id="session-info" class="section level1">
<h1>Session Info</h1>
<pre class="r"><code>devtools::session_info()</code></pre>
<pre><code>## Session info -------------------------------------------------------------</code></pre>
<pre><code>##  setting  value                       
##  version  R version 3.3.1 (2016-06-21)
##  system   x86_64, darwin13.4.0        
##  ui       X11                         
##  language (EN)                        
##  collate  en_US.UTF-8                 
##  tz       America/New_York            
##  date     2016-12-21</code></pre>
<pre><code>## Packages -----------------------------------------------------------------</code></pre>
<pre><code>##  package   * version     date       source                            
##  backports   1.0.4       2016-10-24 CRAN (R 3.3.0)                    
##  colorout  * 1.1-0       2015-04-20 Github (jalvesaq/colorout@1539f1f)
##  devtools    1.12.0.9000 2016-12-08 Github (hadley/devtools@1ce84b0)  
##  digest      0.6.10      2016-08-02 cran (@0.6.10)                    
##  evaluate    0.10        2016-10-11 CRAN (R 3.3.0)                    
##  htmltools   0.3.6       2016-12-08 Github (rstudio/htmltools@4fbf990)
##  knitr       1.15.1      2016-11-22 cran (@1.15.1)                    
##  magrittr    1.5         2014-11-22 CRAN (R 3.2.0)                    
##  memoise     1.0.0       2016-01-29 CRAN (R 3.2.3)                    
##  pkgbuild    0.0.0.9000  2016-12-08 Github (r-pkgs/pkgbuild@65eace0)  
##  pkgload     0.0.0.9000  2016-12-08 Github (r-pkgs/pkgload@def2b10)   
##  Rcpp        0.12.8.2    2016-12-08 Github (RcppCore/Rcpp@8c7246e)    
##  rmarkdown   1.2.9000    2016-12-08 Github (rstudio/rmarkdown@7a3df75)
##  rprojroot   1.1         2016-10-29 cran (@1.1)                       
##  stringi     1.1.2       2016-10-01 CRAN (R 3.3.0)                    
##  stringr     1.1.0       2016-08-19 cran (@1.1.0)                     
##  withr       1.0.2       2016-06-20 CRAN (R 3.3.0)                    
##  yaml        2.1.14      2016-11-12 CRAN (R 3.3.2)</code></pre>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
